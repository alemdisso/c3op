<?php 
$pageData = $this->pageData;
$actionInfo = $pageData['actionInfo'];
?>
<?php
if (is_array($actionInfo)) {
  $actionData = $actionInfo;
?>
    <div id="MainHeader">
      <h1>Projeto <a href="<?php print($actionData['projectDetailLink']) ?>"><?php print($actionData['projectTitle']) ?></a></h1>
      <p>
        Detalhamento da ação <?php print($actionData['actionTitle']) ?>
      </p>
    </div><!-- MainHeader -->

    <div class="Area">

      <div class="three columns alpha Right">
        Responsável:
      </div>
      <div class="six columns">
        <?php print($actionData['responsible']); ?>
      </div>
      <div class="two columns Right">
        Status:
      </div>
      <div class="three columns omega">
        <?php print($actionData['status']); ?>
      </div>

      <div class="three columns alpha Right">
        Subordinada a:
      </div>
      <div class="eleven columns omega">
        <a class="parent_info" href="<?php print($actionData['parentLink']) ?>"><?php print($actionData['parentTitle']); ?></a>
      </div>

      <div class="three columns alpha Right">
        Composta por: 
      </div>
      <div class="eleven columns omega">


        <table id="SubAcoes" class="display dataTable">
          <thead>
            <tr>
              <th width="five columns alpha omega">Ação</th>
              <th width="three columns alpha omega">Responsável</th>
              <th width="two columns alpha omega">Status</th>
              <th width="1%">&nbsp;</th>
            </tr>
          </thead>
          <tbody>
      
            <!-- ### loop de carga das ações subordinadas a esta ação -->
            <tr>
              <td><?php print($actionInfo['title']) ?></td>
              <td><?php print($actionData['status']); ?></td>
              <td><?php print($actionData['responsible']); ?></td>
              <td>
                <a href="#" class="button one column alpha omega anchorclass" rel="submenu1">Opções</a> 
                <div id="submenu1" class="anylinkcss">
                    <ul>
                      <li>
                        <a href="<?php print($actionInfo['editLink']) ?>">Editar</a>
                      </li>
                      <li>
                        <div id='rejectReceipt-<?php print($actionInfo['id']);?>'><a class="parent_info" href="<?php print($actionInfo['rejectLink']); ?>">Rejeitar</a></div><br />
                      </li>
                      <li>
                        <div id='acceptReceipt-<?php print($actionData['id']);?>'><a class="parent_info" href="<?php print($actionData['acceptLink']); ?>">Aceitar</a></div><br />
                      </li>
                    </ul>
                </div><!-- #submenu1 -->
              </td>
            </tr>
            <!-- ### fim do loop de carga das ações subordinadas a esta ação -->
      
          </tbody>
        </table><br />
      </div>

      <div class="three columns alpha Right">
        Descrição:
      </div>
      <div class="eleven columns omega">
        <?php print($actionData['description']); ?>
      </div>
      
      <div class="three columns alpha Right">
        Início previsto:
      </div>
      <div class="one column">
        <?php print($actionData['predictedBeginDate']); ?>
      </div>
      <div class="three columns Right">
        Término previsto:
      </div>
      <div class="one column">
        <?php print($actionData['predictedFinishDate']); ?>
      </div>
      <div class="three columns inset-by-three omega">
        <?php print($actionData['milestone']); ?>
      </div>

      <div class="three columns alpha Right">
        Início real:
      </div>
      <div class="one column">
        <?php print($actionData['msgStart']); ?>
      </div>
      <div class="three columns Right">
        Término real:
      </div>
      <div class="one column">
        <?php print($actionData['realFinishDate']); ?>
      </div>
      <div class="three columns inset-by-three omega">
        <div id='acknowledgeStart-<?php print($actionData['id']);?>'>
          <a class="full column button full column alpha omega" href="<?php print($actionData['linkAcknowledgement']); ?>"><?php print($actionData['msgAcknowledgement']); ?></a>
        </div>
      </div>

      <div class="three columns alpha Right">
        Recebida em:
      </div>
      <div class="one column">
        <?php print($actionData['msgDone']); ?>
      </div>
      <div class="three columns">
        <p>
          <a class="button full column alpha omega parent_info" href="<?php print($actionData['rejectLink']); ?>">Rejeitar a tarefa</a>
        </p>
      </div>
      <div class="three columns inset-by-four omega">
        <div id='acceptReceipt-<?php print($actionData['id']);?>'>
          <a class="button full column alpha omega parent_info" href="<?php print($actionData['acceptLink']); ?>">Aceitar a tarefa</a></div>
      </div>
      
      <div class="three columns alpha Right">
        Realizada em:
      </div>
      <div class="one column inset-by-ten omega">
        <?php print($actionData['finishDate']); ?>
      </div>

    </div><!-- .Area -->

    <div class="Area">
      
      <h2>Recursos humanos</h2>
      <table id="RecursosHumanos" class="display dataTable">
        <thead>
          <tr>
            <th width="220">Nome</th>
            <th width="80">Papel</th>
            <th width="100">Valor</th>
            <th width="100">Situação</th>
            <th width="100">&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          
          <!-- ### loop de carga dos recursos humanos alocados a esta ação -->
          <tr>
            <td>
              <a href="/projects/human-resource/edit/?id=<?php print($actionInfo['humanResourceId']) ?>"><?php print($actionInfo['humanResourceContactName']) ?></a>
            </td>
            <td>
              <?php print($actionInfo['humanResourceDescription']) ?>
            </td>
            <td>
              <?php print($actionInfo['humanResourceValue']) ?>
            </td>
            <td>
              <?php print($actionInfo['humanResourceContract']) ?>
            </td>
            <td>
              <a href="#" class="button one column alpha omega anchorclass" rel="submenu2">Opções</a> 
              <div id="submenu2" class="anylinkcss">
                  <ul>
                    <li>
                      <a href="/projects/human-resource/edit/?id=<?php print($actionInfo['humanResourceId']) ?>">Editar</a>
                    </li>
                    <li>
                      <div id='dismissContact-<?php print($actionInfo['humanResourceId']);?>'><a class="parent_info" href="<?php print($actionInfo['humanResourceDismissalLink']); ?>">dispensar recurso</a></div>
                    </li>
                    <li>
                      <a class="parent_info" href="/projects/human-resource/contract/?id=<?php print($actionInfo['humanResourceId']);?>" >confirmar contratação de recurso</a>
                    </li>
                  </ul>
              </div><!-- #submenu1 -->
            </td>
          </tr>
          <!-- ### fim do loop de carga dos recursos humanos alocados a esta ação -->

        </tbody>
      </table>
      
      <p>
        <a href="/projects/human-resource/create/?actionId=<?php print($actionData['id']); ?>" class="button three columns alpha omega">Prever recurso humano</a>
      </p>

    </div><!-- .Area -->

    <div class="Area">
      
      <p>
        <a href="<?php print($actionData['editLink']) ?>" class="button three columns alpha omega">Editar esta ação</a>
        <a href="<?php print($actionData['linkActionCreate']) ?>" class="button three columns alpha omega">Criar nova ação</a>
      </p>

    </div><!-- .Area -->

    <!-- ### Será preciso montar a tabela de recursos materias, idêntica à de recursos humanos, assim que forem tratados pelo sistema -->

<?php
}
?>
